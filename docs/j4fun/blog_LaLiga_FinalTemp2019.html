<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="José R. Ferrer Paris (@jrfep)">

<title>./jrfep - LaLiga 2019: Qué chance tiene A de ganarle a B…</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">J.R. Ferrer-Paris</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Buscar"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Navegación de palanca" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target=""><i class="bi bi-fa-home" role="img">
</i> 
 <span class="menu-text"><i class="fa-solid fa-gear" aria-label="gear"></i> Homo faber</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-fa-landmark--ciencia-y-academia" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text"><i class="fa-solid fa-landmark" aria-label="landmark"></i> Ciencia y academia</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-fa-landmark--ciencia-y-academia">    
        <li>
    <a class="dropdown-item" href="../rzrch/my-publications.html" rel="" target="">
 <span class="dropdown-text">Mis publicaciones</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../rzrch/research-outputs.html" rel="" target="">
 <span class="dropdown-text">Productos científicos</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../rzrch/my-osfr-projects.html" rel="" target="">
 <span class="dropdown-text">Proyectos reproducibles</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../rzrch/my-github-repos.html" rel="" target="">
 <span class="dropdown-text">Repositorios / código</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-fa-leaf--biodiversidad" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text"><i class="fa-solid fa-leaf" aria-label="leaf"></i> Biodiversidad</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-fa-leaf--biodiversidad">    
        <li>
    <a class="dropdown-item" href="../ecos/my-favs.html" rel="" target="">
 <span class="dropdown-text">Mis ecosistemas favoritos</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../taxa/my-favs.html" rel="" target="">
 <span class="dropdown-text">Mis especies favoritas</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-fa-smile--homo-ludens" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text"><i class="fa-solid fa-smile" aria-label="smile"></i> Homo ludens</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-fa-smile--homo-ludens">    
        <li>
    <a class="dropdown-item" href="../j4fun/blog_LaLiga_FinalTemp2019.html" rel="" target=""><i class="bi bi-futbol" role="img">
</i> 
 <span class="dropdown-text">Futbol</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../j4fun/ulysses.html" rel="" target=""><i class="bi bi-book" role="img">
</i> 
 <span class="dropdown-text">Ulysses</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-how-to..." role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
      <i class="bi bi-question" role="img">
</i> 
 <span class="menu-text">How to…</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-how-to...">    
        <li>
    <a class="dropdown-item" href="../how2/how-to-site.html" rel="" target="">
 <span class="dropdown-text">(re-)create this site</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">En esta página</h2>
   
  <ul>
  <li><a href="#la-situación-actual" id="toc-la-situación-actual" class="nav-link active" data-scroll-target="#la-situación-actual">La situación actual</a>
  <ul class="collapse">
  <li><a href="#la-jornada-de-hoy" id="toc-la-jornada-de-hoy" class="nav-link" data-scroll-target="#la-jornada-de-hoy">La jornada de hoy</a></li>
  </ul></li>
  <li><a href="#el-camino-de-los-senderos-que-se-bifurcan" id="toc-el-camino-de-los-senderos-que-se-bifurcan" class="nav-link" data-scroll-target="#el-camino-de-los-senderos-que-se-bifurcan">El camino de los senderos que se bifurcan…</a></li>
  <li><a href="#la-fuente-del-optimismo-o-pesimismo" id="toc-la-fuente-del-optimismo-o-pesimismo" class="nav-link" data-scroll-target="#la-fuente-del-optimismo-o-pesimismo">La fuente del optimismo (o pesimismo)</a>
  <ul class="collapse">
  <li><a href="#el-significado-de-una-pequeña-victoria" id="toc-el-significado-de-una-pequeña-victoria" class="nav-link" data-scroll-target="#el-significado-de-una-pequeña-victoria">El significado de una pequeña victoria…</a></li>
  <li><a href="#qué-pasa-si-pierde" id="toc-qué-pasa-si-pierde" class="nav-link" data-scroll-target="#qué-pasa-si-pierde">¿Qué pasa si pierde?</a></li>
  </ul></li>
  <li><a href="#entonces" id="toc-entonces" class="nav-link" data-scroll-target="#entonces">Entonces…</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/jrfep/jrfep.github.io/edit/mostly-harmless/j4fun/blog_LaLiga_FinalTemp2019.qmd" class="toc-action">Editar esta página</a></p><p><a href="https://github.com/jrfep/jrfep.github.io/issues/new" class="toc-action">Informar de un problema</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">LaLiga 2019: Qué chance tiene A de ganarle a B…</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Autor/a</div>
    <div class="quarto-title-meta-contents">
             <p>José R. Ferrer Paris (<span class="citation" data-cites="jrfep">@jrfep</span>) </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Fecha de publicación</div>
    <div class="quarto-title-meta-contents">
      <p class="date">Invalid Date</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p>Hoy hay un <a href="https://as.com/opinion/2019/04/03/blogs/1554296443_094404.html">partido decisivo</a> en <a href="https://es.wikipedia.org/wiki/Primera_Divisi%C3%B3n_de_Espa%C3%B1a">la primera división de España</a>. A falta de 8 jornadas, el equipo que lidera el campeonato tiene 8 puntos de ventaja sobre el segundo lugar, pero además hoy se enfrentan ambos, por lo que esta ventaja se puede abrir a 11 puntos o cerrar a 5. Un amigo me dice que el que gane hoy se llevará el campeonato, y yo le digo que matemáticamente aún hay muchas opciones. ¿Cómo así? me pregunta él, y yo le respondo:</p>
<section id="la-situación-actual" class="level2">
<h2 class="anchored" data-anchor-id="la-situación-actual">La situación actual</h2>
<p>Se han jugado 30 juegos y tenemos un equipo B (<a href="https://es.wikipedia.org/wiki/F%C3%BAtbol_Club_Barcelona">Futbol Club Barcelona</a>) con 70 puntos y un equipo A (<a href="https://es.wikipedia.org/wiki/Club_Atl%C3%A9tico_de_Madrid">Club Atlético de Madrid</a>) con 62. Restan ocho jornadas y un equipo que gane todos los juegos puede sumar 24 puntos más.</p>
<p>Esta imágen resume la situación con los escenarios posibles, básicamente el equipo A debe hacer nueve puntos más que sus rivales para ganar el campeonato. (No voy a considerar aquí el empate en puntos, pues allí aplican otras reglas de desempate).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>combs <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">B=</span><span class="dv">70</span><span class="sc">+</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">24</span>),<span class="at">A=</span><span class="dv">62</span><span class="sc">+</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">24</span>))</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>combs<span class="sc">$</span>primero <span class="ot">&lt;-</span> <span class="fu">with</span>(combs,<span class="fu">ifelse</span>(B<span class="sc">&gt;</span>A,<span class="dv">1</span>,<span class="fu">ifelse</span>(B<span class="sc">==</span>A,<span class="dv">3</span>,<span class="dv">2</span>)))</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(combs)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   B  A primero
1 70 62       1
2 71 62       1
3 72 62       1
4 73 62       1
5 74 62       1
6 75 62       1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>mtz <span class="ot">&lt;-</span> <span class="fu">matrix</span>(combs<span class="sc">$</span>primero,<span class="at">nrow=</span><span class="dv">25</span>,<span class="at">ncol=</span><span class="dv">25</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">image</span>(<span class="dv">70</span><span class="sc">+</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">24</span>),<span class="dv">62</span><span class="sc">+</span><span class="fu">c</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">24</span>),mtz,<span class="at">col=</span><span class="fu">rgb</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,.<span class="dv">5</span>),<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,.<span class="dv">5</span>),<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,.<span class="dv">5</span>),.<span class="dv">25</span>),<span class="at">xlab=</span><span class="st">"equipo B"</span>,<span class="at">ylab=</span><span class="st">"equipo A"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="dv">70</span>,<span class="dv">62</span>,<span class="at">pch=</span><span class="dv">19</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="blog_LaLiga_FinalTemp2019_files/figure-html/situación J30-1.png" class="img-fluid" width="480"></p>
</div>
</div>
<p>Para asegurar el campeonato, el equipo B tiene el <a href="https://en.wikipedia.org/wiki/Magic_number_(sports)">número mágico</a> de 17 puntos, osea que cualquier combinación de puntos ganados por B y puntos perdidos por A que sume 17 o más punto le dará el campeonato.</p>
<section id="la-jornada-de-hoy" class="level3">
<h3 class="anchored" data-anchor-id="la-jornada-de-hoy">La jornada de hoy</h3>
<p>Para el juego de hoy, hay tres posibles resultados: el equipo A gana (suma tres puntos) y el B pierde (0 puntos), B gana (+3) y A pierde, o empatan (ambos suman 1 punto). El primer resultado acerca a A a su objetivo (la zona roja del gráfico), el segundo lo aleja, y el tercero lo mantiene a la misma distancia</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">image</span>(<span class="dv">70</span><span class="sc">+</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">24</span>),<span class="dv">62</span><span class="sc">+</span><span class="fu">c</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">24</span>),mtz,<span class="at">col=</span><span class="fu">rgb</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,.<span class="dv">5</span>),<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,.<span class="dv">5</span>),<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,.<span class="dv">5</span>),.<span class="dv">25</span>),<span class="at">xlab=</span><span class="st">"equipo B"</span>,<span class="at">ylab=</span><span class="st">"equipo A"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="fu">c</span>(<span class="dv">70</span>,<span class="dv">70</span><span class="sc">+</span><span class="dv">0</span>),<span class="fu">c</span>(<span class="dv">62</span>,<span class="dv">62</span><span class="sc">+</span><span class="dv">3</span>),<span class="at">type=</span><span class="st">"b"</span>,<span class="at">pch=</span><span class="fu">c</span>(<span class="cn">NA</span>,<span class="dv">1</span>))</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="fu">c</span>(<span class="dv">70</span>,<span class="dv">70</span><span class="sc">+</span><span class="dv">3</span>),<span class="fu">c</span>(<span class="dv">62</span>,<span class="dv">62</span><span class="sc">+</span><span class="dv">0</span>),<span class="at">type=</span><span class="st">"b"</span>,<span class="at">pch=</span><span class="fu">c</span>(<span class="dv">19</span>,<span class="dv">1</span>))</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="fu">c</span>(<span class="dv">70</span>,<span class="dv">70</span><span class="sc">+</span><span class="dv">1</span>),<span class="fu">c</span>(<span class="dv">62</span>,<span class="dv">62</span><span class="sc">+</span><span class="dv">1</span>),<span class="at">type=</span><span class="st">"b"</span>,<span class="at">pch=</span><span class="fu">c</span>(<span class="cn">NA</span>,<span class="dv">1</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="blog_LaLiga_FinalTemp2019_files/figure-html/posibilidades J31-1.png" class="img-fluid" width="480"></p>
</div>
</div>
</section>
</section>
<section id="el-camino-de-los-senderos-que-se-bifurcan" class="level2">
<h2 class="anchored" data-anchor-id="el-camino-de-los-senderos-que-se-bifurcan">El camino de los senderos que se bifurcan…</h2>
<p>Para la próxima jornada, ambos equipos se enfrentan a rivales diferentes, por tanto pueden ganar, perder o empatar de forma independiente. Hay por tanto nueve combinaciones posibles para cada una de las tres combinaciones anteriores, sin embargo algunas combinaciones de resultados son más frecuentes (representado aquí por el tamaño del círculo), pues se pueden llegar por diferentes vias (una combinación de una derrota y una victoria, o una victoria seguida de derrota suman los mismos puntos al final de las dos jornadas).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>combs.J32 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="fu">expand.grid</span>(<span class="at">B0=</span><span class="dv">70</span>,<span class="at">A0=</span><span class="dv">65</span>, <span class="at">RB=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>),<span class="at">RA=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>)),</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expand.grid</span>(<span class="at">B0=</span><span class="dv">73</span>,<span class="at">A0=</span><span class="dv">62</span>, <span class="at">RB=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>),<span class="at">RA=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>)),</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">expand.grid</span>(<span class="at">B0=</span><span class="dv">71</span>,<span class="at">A0=</span><span class="dv">63</span>, <span class="at">RB=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>),<span class="at">RA=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>)))</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>combs.J32<span class="sc">$</span>TA <span class="ot">&lt;-</span> combs.J32<span class="sc">$</span>A0<span class="sc">+</span>combs.J32<span class="sc">$</span>RA</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>combs.J32<span class="sc">$</span>TB <span class="ot">&lt;-</span> combs.J32<span class="sc">$</span>B0<span class="sc">+</span>combs.J32<span class="sc">$</span>RB</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>ttls.J32 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">with</span>(combs.J32,<span class="fu">table</span>(TB,TA)))</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>ttls.J32 <span class="ot">&lt;-</span> <span class="fu">subset</span>(ttls.J32,Freq<span class="sc">&gt;</span><span class="dv">0</span>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>ttls.J32<span class="sc">$</span>TB <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(ttls.J32<span class="sc">$</span>TB))</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>ttls.J32<span class="sc">$</span>TA <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(ttls.J32<span class="sc">$</span>TA))</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="fu">image</span>(<span class="dv">70</span><span class="sc">+</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">24</span>),<span class="dv">62</span><span class="sc">+</span><span class="fu">c</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">24</span>),mtz,<span class="at">col=</span><span class="fu">rgb</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,.<span class="dv">5</span>),<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,.<span class="dv">5</span>),<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,.<span class="dv">5</span>),.<span class="dv">25</span>),<span class="at">xlab=</span><span class="st">"equipo B"</span>,<span class="at">ylab=</span><span class="st">"equipo A"</span>)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="fu">c</span>(<span class="dv">70</span>,<span class="dv">70</span><span class="sc">+</span><span class="dv">0</span>),<span class="fu">c</span>(<span class="dv">62</span>,<span class="dv">62</span><span class="sc">+</span><span class="dv">3</span>),<span class="at">type=</span><span class="st">"b"</span>,<span class="at">pch=</span><span class="fu">c</span>(<span class="cn">NA</span>,<span class="cn">NA</span>),<span class="at">lty=</span><span class="dv">2</span>,<span class="at">cex=</span><span class="fl">1.3</span>)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="fu">c</span>(<span class="dv">70</span>,<span class="dv">70</span><span class="sc">+</span><span class="dv">3</span>),<span class="fu">c</span>(<span class="dv">62</span>,<span class="dv">62</span><span class="sc">+</span><span class="dv">0</span>),<span class="at">type=</span><span class="st">"b"</span>,<span class="at">pch=</span><span class="fu">c</span>(<span class="dv">19</span>,<span class="cn">NA</span>),<span class="at">lty=</span><span class="dv">2</span>,<span class="at">cex=</span><span class="fl">1.3</span>)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="fu">c</span>(<span class="dv">70</span>,<span class="dv">70</span><span class="sc">+</span><span class="dv">1</span>),<span class="fu">c</span>(<span class="dv">62</span>,<span class="dv">62</span><span class="sc">+</span><span class="dv">1</span>),<span class="at">type=</span><span class="st">"b"</span>,<span class="at">pch=</span><span class="fu">c</span>(<span class="cn">NA</span>,<span class="cn">NA</span>),<span class="at">lty=</span><span class="dv">2</span>,<span class="at">cex=</span><span class="fl">1.3</span>)</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a> <span class="fu">with</span>(combs.J32,<span class="fu">segments</span>(B0,A0,TB,TA,<span class="at">lty=</span><span class="dv">3</span>,<span class="at">col=</span><span class="st">"aliceblue"</span>))</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(ttls.J32,<span class="fu">symbols</span>(TB,TA,<span class="at">circle=</span>Freq,<span class="at">inches=</span>.<span class="dv">13</span>,<span class="at">add=</span>T))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="blog_LaLiga_FinalTemp2019_files/figure-html/posibilidades J32-1.png" class="img-fluid" width="480"></p>
</div>
</div>
<p>Añadimos otra jornada en la que ambos equipos se enfrentan a rivales diferentes, por tanto pueden ganar, perder o empatar de forma independiente. Hay entonces nueve combinaciones posibles para cada una de las combinaciones anteriores:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>combs.J33 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(ttls.J32)) {</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    tmp <span class="ot">&lt;-</span>  <span class="fu">expand.grid</span>(<span class="at">B0=</span>ttls.J32<span class="sc">$</span>TB[k],<span class="at">A0=</span>ttls.J32<span class="sc">$</span>TA[k],</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">RB=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>),<span class="at">RA=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    tmp<span class="sc">$</span>Freq <span class="ot">&lt;-</span> ttls.J32<span class="sc">$</span>Freq[k]          </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    combs.J33 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(combs.J33,tmp)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>combs.J33<span class="sc">$</span>TA <span class="ot">&lt;-</span> combs.J33<span class="sc">$</span>A0<span class="sc">+</span>combs.J33<span class="sc">$</span>RA</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>combs.J33<span class="sc">$</span>TB <span class="ot">&lt;-</span> combs.J33<span class="sc">$</span>B0<span class="sc">+</span>combs.J33<span class="sc">$</span>RB</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>ttls.J33 <span class="ot">&lt;-</span> <span class="fu">with</span>(combs.J33,<span class="fu">aggregate</span>(<span class="fu">data.frame</span>(Freq),<span class="fu">list</span>(<span class="at">TB=</span>TB,<span class="at">TA=</span>TA),sum))</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="fu">image</span>(<span class="dv">70</span><span class="sc">+</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">24</span>),<span class="dv">62</span><span class="sc">+</span><span class="fu">c</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">24</span>),mtz,<span class="at">col=</span><span class="fu">rgb</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,.<span class="dv">5</span>),<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,.<span class="dv">5</span>),<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,.<span class="dv">5</span>),.<span class="dv">25</span>),<span class="at">xlab=</span><span class="st">"equipo B"</span>,<span class="at">ylab=</span><span class="st">"equipo A"</span>)</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a> <span class="fu">with</span>(combs.J33,<span class="fu">segments</span>(B0,A0,TB,TA,<span class="at">lty=</span><span class="dv">3</span>,<span class="at">col=</span><span class="st">"aliceblue"</span>))</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(ttls.J33,<span class="fu">symbols</span>(TB,TA,<span class="at">circle=</span>Freq,<span class="at">inches=</span>.<span class="dv">13</span>,<span class="at">add=</span>T))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="blog_LaLiga_FinalTemp2019_files/figure-html/posibilidades J33-1.png" class="img-fluid" width="480"></p>
</div>
</div>
<p>Cada jornada que agregamos, las combinaciones de resultados posibles se va expandiendo, pero los resultados marginales son cada vez menos probables, dadas las múltiples combinaciones que existen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>combs.J34 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(ttls.J33)) {</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    tmp <span class="ot">&lt;-</span>  <span class="fu">expand.grid</span>(<span class="at">B0=</span>ttls.J33<span class="sc">$</span>TB[k],<span class="at">A0=</span>ttls.J33<span class="sc">$</span>TA[k],</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">RB=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>),<span class="at">RA=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    tmp<span class="sc">$</span>Freq <span class="ot">&lt;-</span> ttls.J33<span class="sc">$</span>Freq[k]          </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    combs.J34 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(combs.J34,tmp)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>combs.J34<span class="sc">$</span>TA <span class="ot">&lt;-</span> combs.J34<span class="sc">$</span>A0<span class="sc">+</span>combs.J34<span class="sc">$</span>RA</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>combs.J34<span class="sc">$</span>TB <span class="ot">&lt;-</span> combs.J34<span class="sc">$</span>B0<span class="sc">+</span>combs.J34<span class="sc">$</span>RB</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>ttls.J34 <span class="ot">&lt;-</span> <span class="fu">with</span>(combs.J34,<span class="fu">aggregate</span>(<span class="fu">data.frame</span>(Freq),<span class="fu">list</span>(<span class="at">TB=</span>TB,<span class="at">TA=</span>TA),sum))</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="fu">image</span>(<span class="dv">70</span><span class="sc">+</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">24</span>),<span class="dv">62</span><span class="sc">+</span><span class="fu">c</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">24</span>),mtz,<span class="at">col=</span><span class="fu">rgb</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,.<span class="dv">5</span>),<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,.<span class="dv">5</span>),<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,.<span class="dv">5</span>),.<span class="dv">25</span>),<span class="at">xlab=</span><span class="st">"equipo B"</span>,<span class="at">ylab=</span><span class="st">"equipo A"</span>)</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a> <span class="fu">with</span>(combs.J34,<span class="fu">segments</span>(B0,A0,TB,TA,<span class="at">lty=</span><span class="dv">3</span>,<span class="at">col=</span><span class="st">"aliceblue"</span>))</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(ttls.J34,<span class="fu">symbols</span>(TB,TA,<span class="at">circle=</span>Freq,<span class="at">inches=</span>.<span class="dv">13</span>,<span class="at">add=</span>T))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="blog_LaLiga_FinalTemp2019_files/figure-html/posibilidades J34-1.png" class="img-fluid" width="480"></p>
</div>
</div>
<p>Ahora podemos calcular cada una de las combinaciones de resultados posibles para las jornadas restantes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">35</span><span class="sc">:</span><span class="dv">38</span>) {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    ttls.old <span class="ot">&lt;-</span> <span class="fu">get</span>(<span class="fu">sprintf</span>(<span class="st">"ttls.J%s"</span>,j<span class="dv">-1</span>))</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    combs.new <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(ttls.old)) {</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>        tmp <span class="ot">&lt;-</span>  <span class="fu">expand.grid</span>(<span class="at">B0=</span>ttls.old<span class="sc">$</span>TB[k],<span class="at">A0=</span>ttls.old<span class="sc">$</span>TA[k],</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">RB=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>),<span class="at">RA=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>        tmp<span class="sc">$</span>Freq <span class="ot">&lt;-</span> ttls.old<span class="sc">$</span>Freq[k]          </span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        combs.new <span class="ot">&lt;-</span> <span class="fu">rbind</span>(combs.new,tmp)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    combs.new<span class="sc">$</span>TA <span class="ot">&lt;-</span> combs.new<span class="sc">$</span>A0<span class="sc">+</span>combs.new<span class="sc">$</span>RA</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    combs.new<span class="sc">$</span>TB <span class="ot">&lt;-</span> combs.new<span class="sc">$</span>B0<span class="sc">+</span>combs.new<span class="sc">$</span>RB</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    ttls.new <span class="ot">&lt;-</span> <span class="fu">with</span>(combs.new,<span class="fu">aggregate</span>(<span class="fu">data.frame</span>(Freq),<span class="fu">list</span>(<span class="at">TB=</span>TB,<span class="at">TA=</span>TA),sum))</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assign</span>(<span class="fu">sprintf</span>(<span class="st">"ttls.J%s"</span>,j),ttls.new)</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="fu">image</span>(<span class="dv">70</span><span class="sc">+</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">24</span>),<span class="dv">62</span><span class="sc">+</span><span class="fu">c</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">24</span>),mtz,<span class="at">col=</span><span class="fu">rgb</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,.<span class="dv">5</span>),<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,.<span class="dv">5</span>),<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,.<span class="dv">5</span>),.<span class="dv">25</span>),<span class="at">xlab=</span><span class="st">"equipo B"</span>,<span class="at">ylab=</span><span class="st">"equipo A"</span>)</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(ttls.J38,<span class="fu">symbols</span>(TB,TA,<span class="at">circle=</span>Freq,<span class="at">inches=</span>.<span class="dv">13</span>,<span class="at">add=</span>T))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="blog_LaLiga_FinalTemp2019_files/figure-html/posibilidades otras-1.png" class="img-fluid" width="480"></p>
</div>
</div>
<p>En total 5.3 % de las combinaciones de resultados posibles favorecen al equipo A, y el resto favorecen al equipo B. Un panorama nada alentador para el equipo que va segundo.</p>
</section>
<section id="la-fuente-del-optimismo-o-pesimismo" class="level2">
<h2 class="anchored" data-anchor-id="la-fuente-del-optimismo-o-pesimismo">La fuente del optimismo (o pesimismo)</h2>
<p>El análisis anterior se basa en todas las combinaciones posibles de resultados, sin embargo, existe muchos factor importantes a considerar. Por ejemplo se podría calcular la probabilidad de que cada equipo gane a sus respectivos rivales según el historial de enfrentamientos, la calidad y forma de los jugadores de cada equipo, y otras condiciones de juego. Tomando esto en cuenta es muy poco probable que alguno de los equipos pierda o empate la mayoría de sus encuentros restantes, o que hile <a href="https://as.com/futbol/2019/04/05/primera/1554459205_248023.html?autoplay=1">una racha de derrotas sin precedentes</a>.</p>
<p>También hay otro factor subjetivo, que es la motivación y ansiedad de cada equipo a medida que van progresando las jornadas y ve que su objetivo se aleja o acerca.</p>
<section id="el-significado-de-una-pequeña-victoria" class="level3">
<h3 class="anchored" data-anchor-id="el-significado-de-una-pequeña-victoria">El significado de una pequeña victoria…</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>combs.J32.opt <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">B0=</span><span class="dv">70</span>,<span class="at">A0=</span><span class="dv">65</span>, <span class="at">RB=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>),<span class="at">RA=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>combs.J32.opt<span class="sc">$</span>TA <span class="ot">&lt;-</span> combs.J32.opt<span class="sc">$</span>A0<span class="sc">+</span>combs.J32.opt<span class="sc">$</span>RA</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>combs.J32.opt<span class="sc">$</span>TB <span class="ot">&lt;-</span> combs.J32.opt<span class="sc">$</span>B0<span class="sc">+</span>combs.J32.opt<span class="sc">$</span>RB</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>ttls.J32.opt <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">with</span>(combs.J32.opt,<span class="fu">table</span>(TB,TA)))</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>ttls.J32.opt <span class="ot">&lt;-</span> <span class="fu">subset</span>(ttls.J32.opt,Freq<span class="sc">&gt;</span><span class="dv">0</span>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>ttls.J32.opt<span class="sc">$</span>TB <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(ttls.J32.opt<span class="sc">$</span>TB))</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>ttls.J32.opt<span class="sc">$</span>TA <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(ttls.J32.opt<span class="sc">$</span>TA))</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>combs.J32.pes <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">B0=</span><span class="dv">73</span>,<span class="at">A0=</span><span class="dv">62</span>, <span class="at">RB=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>),<span class="at">RA=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>combs.J32.pes<span class="sc">$</span>TA <span class="ot">&lt;-</span> combs.J32.pes<span class="sc">$</span>A0<span class="sc">+</span>combs.J32.pes<span class="sc">$</span>RA</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>combs.J32.pes<span class="sc">$</span>TB <span class="ot">&lt;-</span> combs.J32.pes<span class="sc">$</span>B0<span class="sc">+</span>combs.J32.pes<span class="sc">$</span>RB</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>ttls.J32.pes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">with</span>(combs.J32.pes,<span class="fu">table</span>(TB,TA)))</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>ttls.J32.pes <span class="ot">&lt;-</span> <span class="fu">subset</span>(ttls.J32.pes,Freq<span class="sc">&gt;</span><span class="dv">0</span>)</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>ttls.J32.pes<span class="sc">$</span>TB <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(ttls.J32.pes<span class="sc">$</span>TB))</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>ttls.J32.pes<span class="sc">$</span>TA <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(ttls.J32.pes<span class="sc">$</span>TA))</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">33</span><span class="sc">:</span><span class="dv">38</span>) {</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>    ttls.old <span class="ot">&lt;-</span> <span class="fu">get</span>(<span class="fu">sprintf</span>(<span class="st">"ttls.J%s.opt"</span>,j<span class="dv">-1</span>))</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>    combs.new <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(ttls.old)) {</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>        tmp <span class="ot">&lt;-</span>  <span class="fu">expand.grid</span>(<span class="at">B0=</span>ttls.old<span class="sc">$</span>TB[k],<span class="at">A0=</span>ttls.old<span class="sc">$</span>TA[k],</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>             <span class="at">RB=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>),<span class="at">RA=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>        tmp<span class="sc">$</span>Freq <span class="ot">&lt;-</span> ttls.old<span class="sc">$</span>Freq[k]          </span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>        combs.new <span class="ot">&lt;-</span> <span class="fu">rbind</span>(combs.new,tmp)</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>    combs.new<span class="sc">$</span>TA <span class="ot">&lt;-</span> combs.new<span class="sc">$</span>A0<span class="sc">+</span>combs.new<span class="sc">$</span>RA</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>    combs.new<span class="sc">$</span>TB <span class="ot">&lt;-</span> combs.new<span class="sc">$</span>B0<span class="sc">+</span>combs.new<span class="sc">$</span>RB</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>    ttls.new <span class="ot">&lt;-</span> <span class="fu">with</span>(combs.new,<span class="fu">aggregate</span>(<span class="fu">data.frame</span>(Freq),<span class="fu">list</span>(<span class="at">TB=</span>TB,<span class="at">TA=</span>TA),sum))</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assign</span>(<span class="fu">sprintf</span>(<span class="st">"ttls.J%s.opt"</span>,j),ttls.new)</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">33</span><span class="sc">:</span><span class="dv">38</span>) {</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>    ttls.old <span class="ot">&lt;-</span> <span class="fu">get</span>(<span class="fu">sprintf</span>(<span class="st">"ttls.J%s.pes"</span>,j<span class="dv">-1</span>))</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>    combs.new <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(ttls.old)) {</span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>        tmp <span class="ot">&lt;-</span>  <span class="fu">expand.grid</span>(<span class="at">B0=</span>ttls.old<span class="sc">$</span>TB[k],<span class="at">A0=</span>ttls.old<span class="sc">$</span>TA[k],</span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>             <span class="at">RB=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>),<span class="at">RA=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>        tmp<span class="sc">$</span>Freq <span class="ot">&lt;-</span> ttls.old<span class="sc">$</span>Freq[k]          </span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>        combs.new <span class="ot">&lt;-</span> <span class="fu">rbind</span>(combs.new,tmp)</span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>    combs.new<span class="sc">$</span>TA <span class="ot">&lt;-</span> combs.new<span class="sc">$</span>A0<span class="sc">+</span>combs.new<span class="sc">$</span>RA</span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>    combs.new<span class="sc">$</span>TB <span class="ot">&lt;-</span> combs.new<span class="sc">$</span>B0<span class="sc">+</span>combs.new<span class="sc">$</span>RB</span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>    ttls.new <span class="ot">&lt;-</span> <span class="fu">with</span>(combs.new,<span class="fu">aggregate</span>(<span class="fu">data.frame</span>(Freq),<span class="fu">list</span>(<span class="at">TB=</span>TB,<span class="at">TA=</span>TA),sum))</span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assign</span>(<span class="fu">sprintf</span>(<span class="st">"ttls.J%s.pes"</span>,j),ttls.new)</span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a><span class="fu">image</span>(<span class="dv">70</span><span class="sc">+</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">24</span>),<span class="dv">62</span><span class="sc">+</span><span class="fu">c</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">24</span>),mtz,<span class="at">col=</span><span class="fu">rgb</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,.<span class="dv">5</span>),<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,.<span class="dv">5</span>),<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,.<span class="dv">5</span>),.<span class="dv">25</span>),<span class="at">xlab=</span><span class="st">"equipo B"</span>,<span class="at">ylab=</span><span class="st">"equipo A"</span>)</span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(ttls.J38.opt,<span class="fu">symbols</span>(TB,TA,<span class="at">circle=</span>Freq,<span class="at">inches=</span>.<span class="dv">13</span>,<span class="at">add=</span>T))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="blog_LaLiga_FinalTemp2019_files/figure-html/escenario optimista para A-1.png" class="img-fluid" width="480"></p>
</div>
</div>
<p>En este caso particular las opciones del equipo A son de apenas 12.1 % dadas todas las combinaciones posibles, pero esto puede cambiar si obtiene un resultado positivo o negativo en su próximo encuentro.</p>
<p>Si el equipo A gana, se da un pequeño desplazamiento de las combinaciones posibles, pero el porcentaje que las opciones que le darían el campeonato sigue siendo un valor bajo: 12.1 %. Sin embargo hay que tomar en cuenta que desde un punto de vista anímico, se percibe que las opciones de titularse campeón se duplican (o más exactamente se multiplican por 2.25).</p>
<p>Para el equipo B, la derrota no representa un cambio tan drástico en sus posibilidades (disminuyen en un 9.9 %).</p>
</section>
<section id="qué-pasa-si-pierde" class="level3">
<h3 class="anchored" data-anchor-id="qué-pasa-si-pierde">¿Qué pasa si pierde?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">image</span>(<span class="dv">70</span><span class="sc">+</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">24</span>),<span class="dv">62</span><span class="sc">+</span><span class="fu">c</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">24</span>),mtz,<span class="at">col=</span><span class="fu">rgb</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,.<span class="dv">5</span>),<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,.<span class="dv">5</span>),<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,.<span class="dv">5</span>),.<span class="dv">25</span>),<span class="at">xlab=</span><span class="st">"equipo B"</span>,<span class="at">ylab=</span><span class="st">"equipo A"</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(ttls.J38.pes,<span class="fu">symbols</span>(TB,TA,<span class="at">circle=</span>Freq,<span class="at">inches=</span>.<span class="dv">13</span>,<span class="at">add=</span>T))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="blog_LaLiga_FinalTemp2019_files/figure-html/escenario pesimista para A-1.png" class="img-fluid" width="480"></p>
</div>
</div>
<p>Sin embargo, si el equipo A pierde, el porcentaje que las opciones que le darían el campeonato <a href="https://as.com/futbol/2019/04/04/primera/1554383303_873741.html">practicamente se desvanecen</a>: 0.6 %.</p>
</section>
</section>
<section id="entonces" class="level2">
<h2 class="anchored" data-anchor-id="entonces">Entonces…</h2>
<p>Volviendo a la pregunta inicial, las opciones matemáticas se mantendran en la mesa aún después del juego de hoy, pero anímicamente la diferencia entre una victoria y una derrota es completamente asimétrica, y puede ser demoledora para el que tiene menos posibilidades abiertas.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>