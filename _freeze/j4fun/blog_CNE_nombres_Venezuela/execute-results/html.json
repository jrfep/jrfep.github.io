{
  "hash": "ccf9991167d51c46a7124b8dacb61eeb",
  "result": {
    "markdown": "---\ntitle: \"Todos los nombres (I)\"\nauthor: \n - name: \n    given: José R. \n    family: Ferrer-Paris\ndate: \"Febrero 16, 2019\"\ncitation: \n url: https://jrfep.github.io/j4fun/blog_CNE_nombres_Venezuela.html\n\noutput: html_document\n---\n\n\n\n\nLos nombres personales y apellidos son un fascinante tema, [no sólo para obras literarias](https://es.wikipedia.org/wiki/Todos_los_nombres), sino también para análisis estadísticos muy variados, en las áreas de ciencias sociales, ciencias históricas, medicina y ecología humana.\n\nLos apellidos se heredan según sistemas tradicionales y/o legales, y vienen a ser una medida indirecta de la genealogía, siguiendo (en la mayor parte de los casos) la línea paternal. Por otro lado los nombres son escogidos siguiendo muchas pautas sociales distintas y pueden reflejar tradiciones, idiosincracias o modas temporales.\n\nExisten muchos ejemplos de análisis estadísticos relacionadas con la historia (o [futuro](https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0018105)) de los nombres, con su [distribución geográfica](http://research.ucc.ie/doi/atlas), etc.\n\nEn esta serie de análisis voy a ilustrar algunas curiosidades sobre nombres y apellidos venezolanos en general (y zulianos en particular), y mostrar ejemplos de código en *R* que puede ser útil para visualizar la distribución y frecuencia de nombres en Venezuela.\n\n## Los datos\n\nPara estos análisis voy a utilizar los datos del [registro electoral de Venezuela del año 2012](http://www.cne.gov.ve/web/registro_electoral_descarga/abril2012/). *La base de datos del registro electoral tiene información muy valiosa, pero también incluye algunos errores de transcripción e inconsistencias que pueden entorpecer los análisis.*\n\nPara un primer ejercicio utilizamos una matriz de la frecuencia de aparición de los apellidos por estado. La versión que utilizo ha sido parcialmente depurada para facilitar los análisis, pero no ha sido posible realizar una revisión y validación completa. Estos datos están disponibles en un [repositorio público de mi cuenta de github](https://github.com/jrfep/poblacion-municipios-venezuela).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhere::i_am(\"j4fun/blog_CNE_nombres_Venezuela.Rmd\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nhere() starts at /Users/z3529065/proyectos/personal/jrfep.github.io\n```\n:::\n\n```{.r .cell-code}\nmi.url <- \"https://github.com/jrfep/poblacion-municipios-venezuela/raw/master/Rdata/MatrizApellidosVenezuela.rda\"\nmi.rda <- here::here(\"data\",\"MatrizApellidosVenezuela.rda\")\nif (!file.exists(mi.rda))\n  download.file(mi.url,destfile = mi.rda)\n(load(mi.rda))   \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"mtz.ap.vzla\"\n```\n:::\n:::\n\n\nLa base de datos original contiene datos de más de 20 millones de personas registradas, pero después de descartar algunos datos dudosos o incompletos,  la matriz resultante incluye datos de aproximadamente 16.421.396 personas, entre las que hay al menos 192.200 apellidos diferentes.\n\nCon estos datos podemos ver la lista de los [20 apellidos más frecuentes en Venezuela](https://es.wikipedia.org/wiki/Anexo:Apellidos_m%C3%A1s_comunes_en_Espa%C3%B1a_e_Hispanoam%C3%A9rica#Venezuela):\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntail(sort(rowSums(mtz.ap.vzla)),20)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nGUTIERREZ    MORENO    MEDINA   MENDOZA FERNANDEZ    TORRES    ROMERO     GOMEZ \n   199351    204016    217038    223960    225231    230289    238567    259606 \n CASTILLO   RAMIREZ     ROJAS      DIAZ     LOPEZ   SANCHEZ  MARTINEZ    GARCIA \n   264066    298429    317125    342789    368141    400301    420947    532944 \nHERNANDEZ     PEREZ RODRIGUEZ  GONZALEZ \n   576155    603874    833224    914348 \n```\n:::\n:::\n\n\n## Diversidad de apellidos\n\nEl estado Delta Amacuro tiene solo 5740 apellidos diferentes con una población registrada de aproximadamente 93.214 votantes, mientras que el estado con mayor riqueza de apellidos es Miranda con 71488 entre 1.719.922 personas registradas.\n\nPara cada estado comparamos esta riqueza (número de apellidos) con la diversidad de Shannon, la cual puede interpretarse como el logaritmo de la riqueza ajustada por la abundancia relativa de cada elemento.\n\nAquí uso la función *diversity* del paquete *[vegan](https://github.com/vegandevs/vegan)* en *R*.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrequire(vegan)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: vegan\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: permute\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: lattice\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThis is vegan 2.6-4\n```\n:::\n\n```{.r .cell-code}\nS <- log(colSums(mtz.ap.vzla>0))\nH <- diversity(t(mtz.ap.vzla))\n```\n:::\n\n\nPara generar el gráfico utilizo el siguiente bloque de código:\n\n\n::: {.cell}\n\n```{.r .cell-code}\noo <- order(S)\npar(mar=c(10,4,0,4),las=2)\nplot(S[oo],axes=F,xlab=\"\",ylab=\"Número de apellidos\",ylim=c(5,12),pch=19,col=\"peru\",cex=1.2)\ntext(6,log(22000),\"Riqueza\",col=\"peru\")\n\npoints(H[oo],col=\"slateblue4\",pch=19,cex=1.2)\ntext(6,log(700),\"Diversidad\",col=\"slateblue4\")\n\nlines(1:24,S[oo]*mean(H/S),lwd=2,col=\"orangered\")\naxis(1,1:length(oo),names(S)[oo])\npar(las=0)\nmtext(\"Escala logarítmica\",side=4,line=3)\naxis(2,log(c(500,3000,9000,25000,60000)),c(500,3000,9000,25000,60000))\naxis(4)\nbox()\n```\n\n::: {.cell-output-display}\n![](blog_CNE_nombres_Venezuela_files/figure-html/PlotDiversity-1.png){width=768}\n:::\n:::\n\n\nLa línea naranja representa la diversidad esperada según el logaritmo de la riqueza, es decir la relación promedio entre riqueza y diversidad.\n\nEl patrón observado muestra que los estados con mayor riqueza (De Miranda hasta Mérida) tienden a tener una diversidad menor a la esperada, posiblemente por sobrerepresentación de algunos apellidos dominantes.\n\nPor otro lado, los estados con menor riqueza (de Vargas a Delta Amacuro) tienden a tener una diversidad observada por encima de la esperada. Esto puede deberse a una mayor \"equidad\" entre los apellidos, o sea que sus frecuencias relativas tienen una distribución más homogénea.\n\n## Diferencias regionales\n\nEn un segundo paso vamos a comparar la frecuencia de los apellidos entre estados para calcular su similitud en composición.\n\nEn primer lugar vamos a seleccionar solamente los apellidos con una frecuencia mayor a 500.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nm0 <- mtz.ap.vzla[rowSums(mtz.ap.vzla)>500,]\ndim(m0)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 2932   24\n```\n:::\n:::\n\n\nLuego transformamos la matriz resultante  de tal forma que todas las columnas sumen a uno. De esta manera todos los estados tienen el mismo peso en el análisis, y se comparan las frecuencias relativas de los apellidos en vez de sus valores absolutos.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nm1 <- apply(m0,2,function(x) x/sum(x))\n```\n:::\n\nEn este caso voy a usar un par de función *agnes* del paquete *[cluster](https://cran.r-project.org/package=cluster)* para hacer un agrupación jerárquica de los estados. Entre los métodos disponibles escogí el [método de Ward](https://en.wikipedia.org/wiki/Ward%27s_method).\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrequire(cluster)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: cluster\n```\n:::\n\n```{.r .cell-code}\nh0 <- agnes(t(m1),method=\"ward\")\n```\n:::\n\n\nEstos resultados se visualizan en un dendrograma, en el cuál se pueden identificar al menos 4 grupos bien definidos.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot(h0,  which.plot = 2,xlab=\"Basado en la frequencia de apellidos por estado\",sub=sprintf(\"Coeficiente de aglomeración = %0.2f\",h0$ac),main=\"Dendrograma de agrupamiento jerárquico según el método de Ward\",ylab=\"Disimilitud\",hang=0.4,cex=.8)\n\nrect.hclust(h0, k=4, border = 2:6)\nabline(h=0.085,lty=2,col=\"orangered\")\n```\n\n::: {.cell-output-display}\n![](blog_CNE_nombres_Venezuela_files/figure-html/PlotComposicion-1.png){width=768}\n:::\n:::\n\n\nEl primer grupo, incluye la mitad de los estados de Venezuela, representantes de los Llanos, la Cordillera de la Costa, y que incluye también un estado de Occidente (Lara) y otro del sur (Amazonas). Luego están los estados Zulia y Falcón formando un grupo aparte. En el tercer grupo están estados andinos (incluyendo Barinas). Finalmente los estados de Oriente y Guayana forman un último bloque. \n\nMás adelante trataré de analizar en más detalle estas diferencias regionales al incluir información espacialmente explícita sobre la distribución de los nombres.\n\n## Nombres zulianos\n\nEs notable como algunos apellidos representan de idiosincrácias regionales. En la novela \"[Sobre la misma tierra](https://www.goodreads.com/book/show/12863608-sobre-la-misma-tierra)\" nuestro novelista [Rómulo Gallegos](https://es.wikipedia.org/wiki/R%C3%B3mulo_Gallegos) representó a una sociedad marabina con raices Wayuu e influencias alemanas, pero con una fuerte identidad regional. Al anti-héroe de la historia lo bautizó con el nombre de Demetrio Montiel, o \"Montiel Montiel de los Montieles\", para hacer una singular referencia a su arraigado linaje zuliano.\n\n<blockquote class=\"imgur-embed-pub\" lang=\"en\" data-id=\"k11KxTr\"><a href=\"https://imgur.com/k11KxTr\">View post on imgur.com</a></blockquote><script async src=\"//s.imgur.com/min/embed.js\" charset=\"utf-8\"></script>\n\nMi pregunta es muy sencilla: ¿Es éste el apellido más zuliano que puede haber?\n\nAl igual que en el paso anterior debo hacer algunas modificaciones a la matriz para realizar los análisis: escoger los apellidos con una frecuencia mayor a 500, y calcular la importancia del apellido dentro del estado (re-escalar por el total de las columnas) y la importancia del estado para cada apellido (re-escalar por el total de las filas). \n\n\n::: {.cell}\n\n```{.r .cell-code}\nm0 <- mtz.ap.vzla[rowSums(mtz.ap.vzla)>500,]\n## calcular proporción dentro del estado (dividir entre el total del estado) \nm1 <- apply(m0,2,function(x) x/sum(x))\n## calcular proporción entre estados (dividir entre el total del país) \nm2 <- apply(m0,1,function(x) x/sum(x))\n```\n:::\n\nCon estos datos elaboro una tabla con el número de personas con cada apellido en el estado Zulia y en toda Venezuela, y luego la frecuencia del apellido en el Zulia (porcentaje de habitantes con ese apellido), y su representación en el Zulia comparado con el total de Venezuela. Sólo muestro aquí las familias con tienen más de 20% de sus representantes en el estado Zulia, y que suman más de 20.000 personas en el estado (Que me perdonen los Chacín, Portillo, Morán y otros por dejarlos fuera...).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nTabla.Zulia <- data.frame(n.Zulia=m0[,\"ZULIA\"],n.Vzla=rowSums(m0),\n                          freq.Zulia=m1[,\"ZULIA\"],p.Zulia=m2[\"ZULIA\",])\nTabla.Zulia <- subset(Tabla.Zulia,n.Zulia>20000 & p.Zulia>.2)\n##Tabla.Zulia <- subset(Tabla.Zulia,n.Vzla>20000 & p.Zulia>.2)\nDT::datatable(Tabla.Zulia[order(Tabla.Zulia$p.Zulia),])\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-6bebec7deecb05165374\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-6bebec7deecb05165374\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"ROMERO\",\"QUINTERO\",\"PARRA\",\"MORALES\",\"GONZALEZ\",\"CHIRINOS\",\"SOTO\",\"FERNANDEZ\",\"BRACHO\",\"FERRER\",\"RINCON\",\"NAVA\",\"PAZ\",\"PIRELA\",\"FUENMAYOR\",\"VILLALOBOS\",\"URDANETA\",\"MONTIEL\",\"PALMAR\"],[49167,29432,31166,37798,241608,23912,22969,66759,29599,26560,33731,29406,28036,23530,33619,45340,59078,39430,23864],[238567,134943,140205,148957,914348,82803,79393,225231,58052,47990,59560,46544,38895,32629,43636,57160,74457,46130,25666],[0.012545588018781,0.007509950710207302,0.007952402957132398,0.009644642462096209,0.06164936705598552,0.006101452207885193,0.0058608337137385,0.01703441150661624,0.007552562893157989,0.006777123228564349,0.008606895467722291,0.007503316478131147,0.007153743480272218,0.006003980028920148,0.008578317237240394,0.01156908008972544,0.0150745062536568,0.01006106810626101,0.006089204394821523],[0.2060930472362062,0.2181069043966712,0.2222887914125744,0.2537510825271723,0.2642407485990017,0.2887818074224364,0.2893076215787286,0.2964023602434834,0.5098704609660305,0.5534486351323192,0.5663364674278039,0.6317892746648333,0.7208124437588379,0.7211376382972202,0.7704418370153084,0.7932120363890833,0.7934512537437716,0.8547582917840885,0.9297903841658225]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>n.Zulia<\\/th>\\n      <th>n.Vzla<\\/th>\\n      <th>freq.Zulia<\\/th>\\n      <th>p.Zulia<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[1,2,3,4]},{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"n.Zulia\",\"targets\":1},{\"name\":\"n.Vzla\",\"targets\":2},{\"name\":\"freq.Zulia\",\"targets\":3},{\"name\":\"p.Zulia\",\"targets\":4}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nPor lo visto Gallegos debió manejar muy bien el análisis estadístico de los apellidos... En esta selecta lista efectivamente aparece Montiel como un serio candidato al apellido más zuliano. Según el registro electoral de 2012 en Venezuela hay más de 45 mil \"Montieles\" en edad de votar y más del 85% están registrados en el Zulia.\n\nPero aún así hay que considerar otras alternativas no menos zulianas. Palmar es un apellido menos frecuente en el país (sólo 25 mil), pero más del 90% de ellos están en el Zulia. Los apellidos Urdaneta y Villalobos son más numerosos en Venezuela y en el Zulia, pero la proporción de ellos registrados en el estado es de \"apenas\" 79%. \n\nEstos cuatro apellidos pueden considerarse \"indicativos\" del estado Zulia, pues son mucho más frecuentes aquí que en el resto del país. Lo cual quiere decir que si conoces a alguien con ese apellido, lo más probable es que le gusten las [mandocas](https://es.wikipedia.org/wiki/Maracaibo#Gastronom%C3%ADa) y escuche [gaitas en diciembre](https://es.wikipedia.org/wiki/Gaita_zuliana).\n\nSin embargo, si te encuentras en el estado Zulia, es más probable que te encuentres con más González que con cualquier otro de los apellidos zulianos. En el Zulia hay más de 240 mil González (o 1,4 veces más que los Palmar, Montiel, Urdaneta y Villalobos juntos), que representan al menos 26% de los González de Venezuela. \n\n\n## Listo por hoy\n\nBueno, eso es todo por el día de hoy. En otra ocasión retomaré este tema para dedicarle un par de sesiones más a explorar otros aspectos de los apellidos venezolanos.\n\n",
    "supporting": [
      "blog_CNE_nombres_Venezuela_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<link href=\"../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/datatables-binding-0.31/datatables.js\"></script>\n<script src=\"../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js\"></script>\n<link href=\"../site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}